# What is this thing?

TL;DR: It's a bootleg Bitly. Generate simple links that result
in redirection to a URL under your control upon clickage.

This is a simple tool that works similar to Bitly except the
user controls both the splash link and redirect URL. An approach
such as this is desirable when sending links in a messaging
service or application that enforces a length limitation on
the link or when a complex link may discredit a pretext
during social engineering engagements.

It works by bringing a simple HTTP(S) server to a listening
state that will use HTML to redirect a user to an upstream URL.
It's possible to specify a static splash URL and origin URL for
a basic redirect, or a list of redirect URLs can be provided and
a unique splash link will be generated and printed to stdout. All
simplified links are derived from the user-supplied splash-url 
and no restrictions are enforced on redirect URLs.

# Features

- It shortens and simplifies links for your phishing links
- Input file monitoring: i.e. add a link to the URL file and a new
  `splash_link` will be returned without restarting the server
- Log records with timestamps can be easily extracted from the
  database

# Installation

*Python3.6 or newer is required*. For all other requirements:

`python3.6 -m pip install -r requirements.txt`

# Usage

## Basic Terminology

The following definitions provide a description of uncommon terms
that appear in `simple_redirect`

- *splash_url* - The base URL which `splash_links` will be derived.
- *splash_link* - The full link generated by `simple_redirect` that
  is delivered to targets. When supplied a list of URLs, a shortened
  link is created that is suffixed with a user-specified query parameters.
- *redirect_url* - The URL that is returned in the body of the HTTP
  response that the browser will be redirected to. This parameter is
  also the default URL that a user will be delivered to should an unknown
  request be sent to the HTTP server.
- *redirect_file* - A file containing a series of redirect URLs to be
  imported and shortened into `splash_links`.

## Required Inputs

Though `simple_redirect` can create a splash link for a single
URL and forward it along, most will use it to generate multiple
links simultaneously. This gives one the ability to create unique
links for each phishing target.

1. A file of newline delimited URLs we would like to shorten.
2. A host to deploy the HTTP(S) server one

Each URL value will be issued a matching simple URL based on the
parameters described above in [Basic Terminology](#Basic-Terminology)

## Examples

Each of the example below use HTTP on the redirector. _Supply values
to the `--certfile` and `-keyfile` arguments to configure the service
for HTTPS._

### Single Target Redirection

Redirect a short URL to another, more complex, URL.

```bash
python3 simple_redirect.py server -db links.sqlite -p 80 \
  --splash-url http://www.evildomain.com \
  --redirect-url https://www.targetdomain.com?so=many&query=parameters&are=here
```

Visiting the value defined in `--splash-url` above will result in
redirection to the `--redirect-url`. No ID value will be generated
and added to the splash URL.

### Multiple URL Redirection

Generate unique splash URLs for a series of redirect URLs. Let's say
the following is stored in the `--redirect-url-file` `urls.txt`:

```
https://www.targetdomain.com?so=many&query=parameters&are=here&username=target@target.com
https://www.targetdomain.com?so=many&query=parameters&are=here&username=target2@target.com
https://www.targetdomain.com?so=many&query=parameters&are=here&username=target3@target.com
``` 

Running the following command would result in creation of a splash
link value for each URL. Appending additional URLs to the value of
`--redirect-url-file` will result in the service actively creating
a new splash URL and printing it to stdout.

```bash
python3 simple_redirect.py server -db links.sqlite --id-param id -p 80 \
  --redirect-url-file urls.txt \
  --splash-url http://www.evil.domain.com \
  --redirect-url https://www.targetdomain.com?so=many&query=parameters&are=here
```

_Note:_ In this context, `--redirect-url` serves as the default redirection
should a request for an unknown splash URL be received. This means that
any user agent that supplies an invalid will be redirected to that value.
